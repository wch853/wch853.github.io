<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>深入理解计算机系统 | wch的个人主页</title>
    <meta name="description" content="用于分享wch的学习笔记和项目~">
    <link rel="icon" href="/favicon.ico">
    
    <link rel="preload" href="/assets/css/0.styles.74c45c5d.css" as="style"><link rel="preload" href="/assets/js/app.15a66b26.js" as="script"><link rel="preload" href="/assets/js/2.92cd0f37.js" as="script"><link rel="preload" href="/assets/js/55.83a99fe0.js" as="script"><link rel="prefetch" href="/assets/js/10.1166f652.js"><link rel="prefetch" href="/assets/js/11.b6ae0b14.js"><link rel="prefetch" href="/assets/js/12.7802c7ba.js"><link rel="prefetch" href="/assets/js/13.63066938.js"><link rel="prefetch" href="/assets/js/14.1f9fa0d5.js"><link rel="prefetch" href="/assets/js/15.6c758eca.js"><link rel="prefetch" href="/assets/js/16.58440a84.js"><link rel="prefetch" href="/assets/js/17.1e1f5c53.js"><link rel="prefetch" href="/assets/js/18.28115609.js"><link rel="prefetch" href="/assets/js/19.7e395424.js"><link rel="prefetch" href="/assets/js/20.2c2ea5f8.js"><link rel="prefetch" href="/assets/js/21.1e8ef167.js"><link rel="prefetch" href="/assets/js/22.47a8f5b7.js"><link rel="prefetch" href="/assets/js/23.f507c548.js"><link rel="prefetch" href="/assets/js/24.b19f43b8.js"><link rel="prefetch" href="/assets/js/25.5b1882b0.js"><link rel="prefetch" href="/assets/js/26.16cf6f8a.js"><link rel="prefetch" href="/assets/js/27.6f3498d0.js"><link rel="prefetch" href="/assets/js/28.f56b7e3c.js"><link rel="prefetch" href="/assets/js/29.de1da78b.js"><link rel="prefetch" href="/assets/js/3.73d3287d.js"><link rel="prefetch" href="/assets/js/30.108b25a0.js"><link rel="prefetch" href="/assets/js/31.68af7d35.js"><link rel="prefetch" href="/assets/js/32.c9f05837.js"><link rel="prefetch" href="/assets/js/33.13bd6f64.js"><link rel="prefetch" href="/assets/js/34.59041fd7.js"><link rel="prefetch" href="/assets/js/35.4382a261.js"><link rel="prefetch" href="/assets/js/36.01d6324a.js"><link rel="prefetch" href="/assets/js/37.22e4179e.js"><link rel="prefetch" href="/assets/js/38.f553994e.js"><link rel="prefetch" href="/assets/js/39.a72bb5df.js"><link rel="prefetch" href="/assets/js/4.9a52aae5.js"><link rel="prefetch" href="/assets/js/40.3751cd34.js"><link rel="prefetch" href="/assets/js/41.d351ec5d.js"><link rel="prefetch" href="/assets/js/42.b87a3eae.js"><link rel="prefetch" href="/assets/js/43.7035de8a.js"><link rel="prefetch" href="/assets/js/44.2c18f0bc.js"><link rel="prefetch" href="/assets/js/45.52905280.js"><link rel="prefetch" href="/assets/js/46.abb047a4.js"><link rel="prefetch" href="/assets/js/47.2ac230d3.js"><link rel="prefetch" href="/assets/js/48.b63bb42b.js"><link rel="prefetch" href="/assets/js/49.35752ae9.js"><link rel="prefetch" href="/assets/js/5.36029518.js"><link rel="prefetch" href="/assets/js/50.b6bd912f.js"><link rel="prefetch" href="/assets/js/51.0e0db65f.js"><link rel="prefetch" href="/assets/js/52.d15fb17a.js"><link rel="prefetch" href="/assets/js/53.844345be.js"><link rel="prefetch" href="/assets/js/54.52685e8c.js"><link rel="prefetch" href="/assets/js/56.fe26d3a3.js"><link rel="prefetch" href="/assets/js/57.dae36566.js"><link rel="prefetch" href="/assets/js/58.1bfd28b1.js"><link rel="prefetch" href="/assets/js/59.88f55364.js"><link rel="prefetch" href="/assets/js/6.d3b55a54.js"><link rel="prefetch" href="/assets/js/7.af0443ed.js"><link rel="prefetch" href="/assets/js/8.2c9a7ea2.js"><link rel="prefetch" href="/assets/js/9.c08dcf83.js">
    <link rel="stylesheet" href="/assets/css/0.styles.74c45c5d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">wch的个人主页</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/778216ebe79c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wch853" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">主页</a></div><div class="nav-item"><a href="/posts/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="https://www.jianshu.com/u/778216ebe79c" target="_blank" rel="noopener noreferrer" class="nav-link external">
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/wch853" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java虚拟机</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/posts/jvm/深入理解Java虚拟机（一）：自动内存管理机制.html" class="sidebar-link">深入理解Java虚拟机（一）：自动内存管理机制</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java并发编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MyBatis 源码分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring Security 源码分析</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微服务</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>微信小程序</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Elasticsearch</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="深入理解计算机系统"><a href="#深入理解计算机系统" class="header-anchor">#</a> 深入理解计算机系统</h1> <h2 id="系统硬件组成"><a href="#系统硬件组成" class="header-anchor">#</a> 系统硬件组成</h2> <h3 id="总线"><a href="#总线" class="header-anchor">#</a> 总线</h3> <p>贯穿整个系统的是一组电子管道，称作 <code>总线</code>，它携带信息字节并负责在各个部件间传递。通常总线被设计成传送定长的字节块，也就是字，字中的字节数（字长）是一个基本的系统参数，现在大多数机器通常是4个字节（32位）或8个字节（64位）。</p> <h3 id="i-o-设备"><a href="#i-o-设备" class="header-anchor">#</a> I/O 设备</h3> <p><code>I/O</code>（输入/输出）设备是系统与外部世界的联系通道。每个 <code>I/O</code> 设备都通过一个控制器或适配器与 <code>I/O</code> 总线相连，它们的功能是传递信息。</p> <h3 id="主存"><a href="#主存" class="header-anchor">#</a> 主存</h3> <p>主存是一个临时存储设备，在处理器执行程序时，用来存放程序和程序处理的数据。从物理上来说，主存是由一组动态随机存取存储器（<code>DRAM</code>）芯片组成的。从逻辑上来说，存储器是一个线性的字节数组，每个字节都有其唯一的地址（数组索引），这些地址是从0开始的。</p> <h3 id="处理器"><a href="#处理器" class="header-anchor">#</a> 处理器</h3> <p>中央处理单元（<code>CPU</code>），简称处理器，是解释（或执行）存储在主存中指令的引擎。处理器核心是一个大小为一个字的存储设备（或寄存器），称为程序计数器（<code>PC</code>）。在任何时刻，<code>PC</code> 都指向主存中的某条机器语言指令（即含有该条指令的地址）。</p> <p><code>CPU</code> 在指令的要求下可能会执行这些操作：</p> <ul><li>加载：从主存复制一个字节或一个字到寄存器，以覆盖寄存器原来的内容。</li> <li>存储：从寄存器复制一个字节或一个字到主存的某个位置，以覆盖这个位置上原来的内容。</li> <li>操作：把两个寄存器的内容复制到 <code>ALU</code>（算数/逻辑单元），对复制内容做算数运算，并将结果存放到一个寄存器中，以覆盖该寄存器中原来的内容。</li> <li>跳转：从指令本身中抽取一个字，将这个字复制到程序计数器中，以覆盖程序计数器中原来的值。</li></ul> <p><img src="D:%5CJava%5Ccode%5CVisualStudioCodeProjects%5Cwch853.github.io/img/csapp/%E4%B8%80%E4%B8%AA%E5%85%B8%E5%9E%8B%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%88%90.png" alt="一个典型系统的硬件组成"></p> <h2 id="高速缓存"><a href="#高速缓存" class="header-anchor">#</a> 高速缓存</h2> <p>程序的机器指令最初是放在磁盘上，当程序加载时，它们被复制到主存中，当处理器开始运行程序，指令又从主存复制到处理器。对于程序的整个运行流程来说，复制就是开销，系统设计的一个主要目标就是使得这些复制操作尽可能快地完成。</p> <p>根据机械原理，较大的存储设备要比较小的存储设备运行得慢，而快速设备的造价远高于同类的低速设备。例如一个典型系统上的磁盘驱动器可能比主存大1000倍，但是从磁盘驱动器上读取一个字的时间开销要比从主存中读取大1000万倍；类似的，一个典型的寄存器文件只存储几百字节的信息，而主存中可能存储几十亿字节，然而处理器从寄存器中读数据比从主存中读取几乎要快100倍。针对处理器与主存间的差异，系统设计者使用 <code>高速缓存存储器</code> 作为暂时的数据集结区域，存放处理器近期可能会需要的信息。</p> <p><img src="D:%5CJava%5Ccode%5CVisualStudioCodeProjects%5Cwch853.github.io/img/csapp/%E9%AB%98%E9%80%9F%E7%BC%93%E5%AD%98%E8%AE%BE%E8%AE%A1.png" alt="高速缓存设计"></p> <p>位于处理器上的 <code>L1高速缓存</code> 的容量可以达到数万字节，访问速度几乎和访问寄存器文件一样快。一个容量为数十万到数百万字节的更大的 <code>L2高速缓存</code> 通过一条特殊的总线连接到处理器，<code>L2高速缓存</code> 相对于 <code>L1高速缓存</code> 慢，但是仍比访问主存快 5 ~ 10 倍，有些系统甚至有更多类型的高速缓存。</p> <p>系统通过高速缓存获取了一个很大的存储器，同时访问速度也很快。原因是利用了 <code>局部性原理</code>，即程序具有访问局部区域里的数据和代码的趋势。通过在高速缓存里存放可能经常访问的数据，大部分的内存操作都能在高速缓存中完成。</p> <h2 id="存储器层次结构"><a href="#存储器层次结构" class="header-anchor">#</a> 存储器层次结构</h2> <p><img src="D:%5CJava%5Ccode%5CVisualStudioCodeProjects%5Cwch853.github.io/img/csapp%5C%E5%AD%98%E5%82%A8%E5%99%A8%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84.png" alt="存储器层次结构"></p> <h2 id="操作系统管理"><a href="#操作系统管理" class="header-anchor">#</a> 操作系统管理</h2> <h3 id="进程"><a href="#进程" class="header-anchor">#</a> 进程</h3> <p><code>进程</code> 是操作系统对一个正在运行的程序的一种抽象。在一个系统上可以运行多个进程，而每个进程都好像在独占地使用硬件。而并发运行，则是说一个进程的指令和另一个进程的指令是交替执行的。操作系统实现这种交替执行的机制称为 <code>上下文切换</code>。</p> <p>操作系统保持跟踪进程进行所需的所有状态信息，这种状态，也就是上下文，包含许多信息，比如程序计数器和寄存器文件的当前值，以及主存的内容。单个处理器在任何时候都只能执行一个进程的代码，当操作系统决定要把控制权从当前进程转移到某个新进程时，就会进行 <code>上下文切换</code>，即保存当前进程的上下文，恢复新进程的上下文，然后将控制权传递到新进程，新进程就会从它上次停止的地方开始。</p> <h3 id="线程"><a href="#线程" class="header-anchor">#</a> 线程</h3> <p>在现代系统中，一个进程可由多个称为线程的执行单元组成。每个线程都在进程的上下文中，并共享同样的代码和全局数据。由于线程间比进程间更容易共享数据、线程一般也比进程更高效、在多处理器的情况下，多线程可以使程序运行得更快，线程成为越来越重要的编程模型。</p> <h3 id="虚拟内存"><a href="#虚拟内存" class="header-anchor">#</a> 虚拟内存</h3> <p>虚拟内存是一个抽象概念，它为每个进程提供了好像在独占使用主存的假象。每个进程看到的内存都是一致的，称为虚拟地址空间。</p> <h3 id="文件"><a href="#文件" class="header-anchor">#</a> 文件</h3> <p>文件就是字节序列，它向应用程序提供了一个统一的视图，来看待系统中可能含有的所有各式各样的 <code>I/O</code> 设备。</p> <h2 id="网络通信"><a href="#网络通信" class="header-anchor">#</a> 网络通信</h2> <p>从一个单独的网络系统来看，网络可视为一个 <code>I/O</code> 设备。当系统从主存复制一串字节到网络适配器时，数据流经网络到达另一台机器，类似地，系统可以读取其它机器发来的数据，并把数据复制到自己的主存。</p> <h2 id="信息存储"><a href="#信息存储" class="header-anchor">#</a> 信息存储</h2> <p>大多数计算机使用8位的块，或者字节作为最小的可寻址的内存单位，而不是访问内存中单独的位。机器级程序将内存视为一个非常大的字节数组，称为 <code>虚拟内存</code>。内存的每个字节都由一个唯一的数字来标识，称为它的 <code>地址</code>。所有可能的地址的集合就称为 <code>虚拟地址空间</code>，实际实现是将动态随机访问存储器（<code>DRAM</code>）、闪存、磁盘存储器、特殊硬件和操作系统软件结合起来，为程序提供一个看上去统一的字节数组。</p> <h3 id="十六进制"><a href="#十六进制" class="header-anchor">#</a> 十六进制</h3> <p>以 <code>0x</code> 或 <code>0X</code> 开头的数字常量被认为是十六进制的值。十六进制使用数字 <code>0 ~ 9</code> 以及字符 <code>a ~ f</code> 来表示16个可能的值。</p> <h3 id="字数据大小"><a href="#字数据大小" class="header-anchor">#</a> 字数据大小</h3> <p>每台计算机都有一个 <code>字长</code>，指明指针数据的标称大小。因为虚拟地址是以这样一个字来编码的，所以字长决定的最重要的系统参数是虚拟地址空间的最大大小。因此对于字长为 <code>w</code> 的机器而言，虚拟地址的范围为 <code>0 ~ 2^w - 1</code>，即程序最多访问 <code>2^w</code> 个字节。从 <code>32位</code> 字长机器迁移到 <code>64位</code> 字长机器使得虚拟地址空间大规模扩大（突破 <code>32位</code> 的 <code>4GB</code> 地址限制）。</p> <h3 id="寻址和字节顺序"><a href="#寻址和字节顺序" class="header-anchor">#</a> 寻址和字节顺序</h3> <p>在几乎所有机器上，多字节对象都被存储为连续的字节序列，对象的地址为所使用字节中的最小地址。排列对象字节的顺序有两个通用规则，即低位在前的 <code>小端法</code> 和 高位在前的 <code>大端法</code>。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.15a66b26.js" defer></script><script src="/assets/js/2.92cd0f37.js" defer></script><script src="/assets/js/55.83a99fe0.js" defer></script>
  </body>
</html>
