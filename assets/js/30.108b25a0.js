(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{235:function(v,_,t){"use strict";t.r(_);var a=t(0),e=Object(a.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h1",{attrs:{id:"mybatis-源码分析（一）：mybatis-简介和整体架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-源码分析（一）：mybatis-简介和整体架构"}},[v._v("#")]),v._v(" MyBatis 源码分析（一）：MyBatis 简介和整体架构")]),v._v(" "),t("h2",{attrs:{id:"mybatis-简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-简介"}},[v._v("#")]),v._v(" MyBatis 简介")]),v._v(" "),t("p",[t("a",{attrs:{href:"http://www.mybatis.org/mybatis-3/zh/index.html",target:"_blank",rel:"noopener noreferrer"}},[v._v("MyBatis 官方文档"),t("OutboundLink")],1)]),v._v(" "),t("p",[t("code",[v._v("MyBatis")]),v._v(" 是一款旨在帮助开发人员屏蔽底层重复性原生 "),t("code",[v._v("JDBC")]),v._v(" 代码的持久化框架，其支持通过映射文件配置或注解将 "),t("code",[v._v("ResultSet")]),v._v(" 映射为 "),t("code",[v._v("Java")]),v._v(" 对象。相对于其它 "),t("code",[v._v("ORM")]),v._v(" 框架，"),t("code",[v._v("MyBatis")]),v._v(" 更为轻量级，支持定制化 "),t("code",[v._v("SQL")]),v._v(" 和动态 "),t("code",[v._v("SQL")]),v._v("，方便优化查询性能，同时包含了良好的缓存机制。")]),v._v(" "),t("h2",{attrs:{id:"mybatis-整体架构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-整体架构"}},[v._v("#")]),v._v(" MyBatis 整体架构")]),v._v(" "),t("p",[t("img",{attrs:{src:"/img/mybatis/MyBatis%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84.png",alt:"MyBatis整体架构"}})]),v._v(" "),t("h3",{attrs:{id:"基础支持层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#基础支持层"}},[v._v("#")]),v._v(" 基础支持层")]),v._v(" "),t("ul",[t("li",[v._v("反射模块：提供封装的反射 "),t("code",[v._v("API")]),v._v("，方便上层调用。")]),v._v(" "),t("li",[v._v("类型转换：为简化配置文件提供了别名机制，并且实现了 "),t("code",[v._v("Java")]),v._v(" 类型和 "),t("code",[v._v("JDBC")]),v._v(" 类型的互转。")]),v._v(" "),t("li",[v._v("日志模块：能够集成多种第三方日志框架。")]),v._v(" "),t("li",[v._v("资源加载模块：对类加载器进行封装，提供加载类文件和其它资源文件的功能。")]),v._v(" "),t("li",[v._v("数据源模块：提供数据源实现并能够集成第三方数据源模块。")]),v._v(" "),t("li",[v._v("事务管理：可以和 "),t("code",[v._v("Spring")]),v._v(" 集成开发，对事务进行管理。")]),v._v(" "),t("li",[v._v("缓存模块：提供一级缓存和二级缓存，将部分请求拦截在缓存层。")]),v._v(" "),t("li",[t("code",[v._v("Binding")]),v._v(" 模块：在调用 "),t("code",[v._v("SqlSession")]),v._v(" 相应方法执行数据库操作时，需要指定映射文件中的 "),t("code",[v._v("SQL")]),v._v(" 节点，"),t("code",[v._v("MyBatis")]),v._v(" 通过 "),t("code",[v._v("Binding")]),v._v(" 模块将自定义 "),t("code",[v._v("Mapper")]),v._v(" 接口与映射文件关联，避免拼写等错误导致在运行时才发现相应异常。")])]),v._v(" "),t("h3",{attrs:{id:"核心处理层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#核心处理层"}},[v._v("#")]),v._v(" 核心处理层")]),v._v(" "),t("ul",[t("li",[v._v("配置解析："),t("code",[v._v("MyBatis")]),v._v(" 初始化时会加载配置文件、映射文件和 "),t("code",[v._v("Mapper")]),v._v(" 接口的注解信息，解析后会以对象的形式保存到 "),t("code",[v._v("Configuration")]),v._v(" 对象中。")]),v._v(" "),t("li",[t("code",[v._v("SQL")]),v._v(" 解析与 "),t("code",[v._v("scripting")]),v._v(" 模块："),t("code",[v._v("MyBatis")]),v._v(" 支持通过配置实现动态 "),t("code",[v._v("SQL")]),v._v("，即根据不同入参生成 "),t("code",[v._v("SQL")]),v._v("。")]),v._v(" "),t("li",[t("code",[v._v("SQL")]),v._v(" 执行与结果解析："),t("code",[v._v("Executor")]),v._v(" 负责维护缓存和事务管理，并将数据库相关操作委托给 "),t("code",[v._v("StatementHandler")]),v._v("，"),t("code",[v._v("ParmeterHadler")]),v._v(" 负责完成 "),t("code",[v._v("SQL")]),v._v(" 语句的实参绑定并通过 "),t("code",[v._v("Statement")]),v._v(" 对象执行 "),t("code",[v._v("SQL")]),v._v("，通过 "),t("code",[v._v("ResultSet")]),v._v(" 返回结果，交由 "),t("code",[v._v("ResultSetHandler")]),v._v(" 处理。")])]),v._v(" "),t("p",[t("img",{attrs:{src:"/img/mybatis/MyBatis%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B.png",alt:"MyBatis SQL 执行过程"}})]),v._v(" "),t("ul",[t("li",[v._v("插件：支持开发者通过插件接口对 "),t("code",[v._v("MyBatis")]),v._v(" 进行扩展。")])]),v._v(" "),t("h3",{attrs:{id:"接口层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#接口层"}},[v._v("#")]),v._v(" 接口层")]),v._v(" "),t("p",[t("code",[v._v("SqlSession")]),v._v(" 接口定义了暴露给应用程序调用的 "),t("code",[v._v("API")]),v._v("，接口层在收到请求时会调用核心处理层的相应模块完成具体的数据库操作。")]),v._v(" "),t("h2",{attrs:{id:"参考书籍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考书籍"}},[v._v("#")]),v._v(" 参考书籍")]),v._v(" "),t("p",[t("code",[v._v("徐郡明.MyBatis技术内幕[M].电子工业出版社,2017.")])])])}),[],!1,null,null,null);_.default=e.exports}}]);